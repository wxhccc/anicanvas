{"version":3,"file":"index.es5.js","sources":["index.js"],"sourcesContent":["/*全局变量，用于存rem单位*/\n\n$(function(){\n  \n\tlet app = null,\n\t\t\tjcanvas = $('#J_canvas'),\n      canvas = jcanvas[0],\n      t = 0;\n  if(canvas.getContext){\n  \tapp = new Invitation(jcanvas);\n  }\n  $(window).resize(function(){\n    clearTimeout(t);\n    t = setTimeout(function(){\n      app.resize();\n    },500)\n    \n  });  \n});\n\n\nfunction getPageSize(){\n  return {width: $(window).width(), height: $(window).height()};\n}\n\n/*页面逻辑类*/\nclass Invitation{\n  constructor(jqcanvas){\n    this.jcanvas = jqcanvas;\n    this.canvas = jqcanvas[0];\n    this.envInit();\n    this.stage = new Anicanvas(this.canvas, {...this.fullPageSize}); \n    this.pageInit();\n  }\n  envInit() {\n  \tthis.fullPageSize = getPageSize();\n  \tthis.rem = this.fullPageSize.width / 15;\n  }\n  resize(){\n  \tthis.envInit();\n  \tthis.stage.resize();\n  }\n  pageInit(){\n    let _this = this,\n        preload_media = {\n          'images': {'bg1':'./img/bg.jpg','music':'./img/music.png','p1_01':'./img/p1_01.png','p1_02_01':'./img/p1_02_01.png','p1_02_02':'./img/p1_02_02.png','arrow':'./img/arrow.png','p1_03_01':'./img/p1_03_01.png','p1_03_02':'./img/p1_03_02.png','p1_03_03':'./img/p1_03_03.png'},\n          'audios':{'m1':'./media/bgm.mp3'}\n        }\n    /*\n    * 业务逻辑部分\n    */\n    this.stage.start();\n    this.loadingMedia(preload_media);\n  }\n  /*预加载资源*/\n  loadingMedia(preload_media){\n  \tthis.stage.loadingMedia(preload_media, this.drawPage);\n    this.drawLoadinProgress();\n  }\n  /*绘制进度条*/\n  drawLoadinProgress(){\n  \tlet rem = this.rem;\n  \tlet {height} = this.fullPageSize;\n  \tlet bgPainter = new Anicanvas.Painter( function(sprite, ctx, time, fdelta, data){\n  \t\tlet {left, top, width, height} = sprite;\n  \t\tctx.save();\n  \t\tctx.fillStyle = '#efefef';\n  \t\tctx.fillRect(left, top, width, height);\n  \t\tctx.restore();\n  \t});\n  \tlet layer = this.stage.createLayer('progLayer', 'fullpage', bgPainter);\n\n  \tlet progbarPaniter = new Anicanvas.Painter( (sprite, ctx, time, fdelta, data) => {\n  \t\tlet {left, top, width, height} = sprite;\n  \t\tlet mediaload = this.stage.media.getImageProgress();\n  \t\tlet percent = mediaload[2];\n  \t\tctx.save();\n  \t\tctx.fillStyle = '#aeaeae';\n  \t\tctx.fillRect(left, top, width, height);\n  \t\tctx.fillStyle = '#999999';\n  \t\tctx.fillRect(left, top, width * percent / 100, height);\n  \t\tctx.restore();\n  \t\t(percent === 100) && (layer.destroy = true);\n  \t});\n  \tlet progressBar = new Anicanvas.Sprite('progbar', {left: 1*rem, top: height-40, width: 13*rem, height: 20}, progbarPaniter);\n  \tlayer.addSprite(progressBar);\n  \tthis.stage.addLayer(layer);\n  }\n\n  drawPage = () => {\n    let rem = this.rem,\n    \t\tcanvasSize = this.fullPageSize,\n    \t\t{ media: {images, audios}, createLayer, addLayer } = this.stage,\n    \t\tpageLayer = createLayer('page', 'fullpage', new Anicanvas.ImagePainter(images['bg1']));\n    \n    /*音乐播放按钮*/\n    let musicIcoPainter = new Anicanvas.ImagePainter(images['music']);\n    musicIcoPainter.addQueueFn('rotate');\n    let musicIco = new Anicanvas.Sprite('music', {\n\t    \ttop: 0.5 * rem, \n\t    \tleft: 0.865 * 15 * rem,\n\t    \twidth: 1.2 * rem,\n\t    \theight: 1.2 * rem,\n\t    \trotateVelocity: -45,\n\t    \tmedia: {\n\t    \t\t'music': audios['m1']\n\t    \t}\n\t    },\n    \tmusicIcoPainter, {\n      \t'rotate': {\n        \texecute : function(sprite, time, fdelta, data, context){\n          \tsprite.rotate = (sprite.rotate + fdelta/1000 * sprite.rotateVelocity ) % 360;\n        \t}\n      \t}\n    });\n    musicIco.setPath(function(context){\n      context.arc(this.left+this.width/2, this.top+this.height/2, 0, 2*Math.PI);\n    });\n    musicIco.media.play('music');\n    pageLayer.addSprite(musicIco);\n    \n      \n    /*对话框*/\n    let dailogPainter = new Anicanvas.Painter();\n    dailogPainter.paint = (sprite,context,time,fdelta,data) => {\n      if(sprite.data.photo){\n        dailogPainter.putPhoto(sprite, context);\n      }\n      else{\n        let dailog = images['p1_01'];\n        context.save();\n        if(sprite.opacity < 1){\n          context.globalAlpha = sprite.opacity > 0 ? sprite.opacity : 0;\n        }\n        context.drawImage(dailog,0,0,dailog.width,398,sprite.left,sprite.top,sprite.width,sprite.height);\n        if(time>2500){  context.drawImage(dailog,0,400,dailog.width,129,sprite.left,sprite.top+sprite.height*0.2513,sprite.width,sprite.height*0.3241);\n          dailogPainter.getPhoto(sprite,context);\n        }\n        context.restore();\n      }\n    };\n    let dailog = new Anicanvas.Sprite('dailog', {top:-20,left:2.64*rem,opacity:0,width:8.8*rem,height:6.76*rem},dailogPainter,{\n      'slideFadeDown' : new Anicanvas.Behavior({name:'slideFadeDown',timing:'ease',duration:800,delay:700, fillMode: 'forward',animation:{top:'+=20', opacity:1}})\n    });\n    pageLayer.addSprite(dailog);\n      \n    /*箭头动画*/\n    let arrowSlide = new Anicanvas.Behavior({\n    \tname: 'slideUpRepeat',\n    \tduration:2500,\n    \tdelay: 100,\n    \titeration: 'infinite',\n    \tanimation: {\n    \t\t0: {top: '+=8', opacity: 0},\n    \t\t30: {top: '-=3', opacity:1},\n    \t\t100: {top: '-=10', opacity:0}\n    \t}\n    });\n    let arrow = new Anicanvas.Sprite('arrow',{top:canvasSize.height-2*rem+8,left:6.92*rem,width:1.16*rem,opacity:0,height:1.16*rem},new Anicanvas.ImagePainter(images['arrow']),{'slideUpRepeat':arrowSlide})\n    \n    pageLayer.addSprite(arrow);\n      \n    /*背景*/\n    let midBgPanter = {\n      paint:(sprite,context,time,data)=>{\n        let midbg = sprite.data.img;\n        if(midbg) {\n        \tcontext.save();\n\t        if(sprite.opacity < 1){\n\t          context.globalAlpha = sprite.opacity > 0 ? sprite.opacity : 0;\n\t        }\n\t        sprite.top += sprite.velocityY * data;  \n\t        context.drawImage(midbg,0,0,midbg.width,midbg.height,sprite.left,sprite.top,sprite.width,sprite.height);\n\t        context.restore();\n        }\n      }\n    };\n    let midBgBehaviors = {\n      'slideUp':{\n      \tdistance: -20, duration:800, delay:2500,\n        execute : function(sprite, time){\n          sprite.img = images['p1_02_01'];\n          if(time>this.delay){\n            \n            let deltat = time-this.delay;\n            sprite.velocityY = this.distance/this.duration;\n            let opacity = deltat / this.duration;\n            if(deltat>=800){\n              sprite.velocityY = 0;\n              opacity = 1;\n              delete sprite.behaviors.slideUp;\n            }\n            sprite.opacity = opacity>1?1:opacity;\n          }\n        }\n      },\n      'bgswitch':{\n      \tdelay:3500,\n        execute : function(sprite, time){\n          if(time>this.delay){\n            let deltat = time - this.delay,\n                skipt = deltat % 1000;\n            if(skipt<500){\n              sprite.data.img = images['p1_02_01'];\n            }\n            else{\n              sprite.data.img = images['p1_02_02'];\n            }\n          }\n        }\n      }\n    };\n\n    let midBgLayer = new Anicanvas.Layer('midbg', {top:6.96*rem+20, left:0.52*rem, width:13.52*rem, opacity:0, height:12.7*rem, data: {img:null}}, midBgPanter, midBgBehaviors);\n    /*人物*/\n    let peopleCell = [{x:0,y:0,w:268,h:384},{x:270,y:0,w:268,h:384},{x:540,y:0,w:268,h:384},{x:810,y:0,w:268,h:384}],\n        peoplePainter = new Anicanvas.SheetPainter(images['p1_03_01'], peopleCell, {interval:500, autoruning:true, iteration:'infinite'})\n    let people = new Anicanvas.Sprite('people', {top:6.27*rem,left:2.2*rem,width:10.72*rem,opacity:0,height:15.36*rem}, peoplePainter);\n    midBgLayer.addSprite(people);\n    pageLayer.addLayer(midBgLayer);\n    /*固定图片*/\n    let customPainter = {\n      paint:function(sprite,context,time,data){\n        let img = sprite.data.img;\n        img && context.drawImage(img, 0, 0, img.width, img.height, sprite.left, sprite.top, sprite.width, sprite.height);\n      }\n    };\n    let floor = new Anicanvas.Sprite('floor', {top:19.31*rem, left:2.745*rem, width:10.56*rem, height:2.88*rem, data:{ img: images['p1_03_03']}}, customPainter);\n    let desc = new Anicanvas.Sprite('desc', {top:14.275*rem, left:3.84*rem, width:7.02*rem, height:5.12*rem, data:{img: images['p1_03_02']}}, customPainter);\n    midBgLayer.addSprite(desc);\n    console.log(midBgLayer)\n    pageLayer.addSprite(floor);\n\t\taddLayer(pageLayer);\n      \n  }\n    \n  \n}\n\n\n\n"],"names":["$","app","jcanvas","canvas","t","getContext","Invitation","window","resize","clearTimeout","setTimeout","getPageSize","width","height","jqcanvas","drawPage","rem","canvasSize","fullPageSize","stage","media","images","audios","createLayer","addLayer","pageLayer","Anicanvas","ImagePainter","musicIcoPainter","addQueueFn","musicIco","Sprite","top","left","rotateVelocity","execute","sprite","time","fdelta","data","context","rotate","setPath","arc","Math","PI","play","addSprite","dailogPainter","Painter","paint","photo","putPhoto","dailog","save","opacity","globalAlpha","drawImage","getPhoto","restore","Behavior","name","timing","duration","delay","fillMode","animation","arrowSlide","iteration","arrow","midBgPanter","midbg","img","velocityY","midBgBehaviors","distance","deltat","behaviors","slideUp","skipt","midBgLayer","Layer","peopleCell","x","y","w","h","peoplePainter","SheetPainter","interval","autoruning","people","customPainter","floor","desc","console","log","envInit","pageInit","preload_media","start","loadingMedia","drawLoadinProgress","bgPainter","ctx","fillStyle","fillRect","layer","progbarPaniter","mediaload","getImageProgress","percent","destroy","progressBar"],"mappings":"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"}