{"version":3,"file":"index.es5.js","sources":["index.js"],"sourcesContent":["/*全局变量，用于存rem单位*/\r\n\r\n$(function(){\r\n  \r\n\tlet app = new Invitation('#J-wrap');\r\n  $(window).resize(function(){\r\n    clearTimeout(t);\r\n    t = setTimeout(function(){\r\n      app.resize();\r\n    },500)\r\n    \r\n  });  \r\n});\r\n\r\n\r\nfunction getPageSize(){\r\n  return {width: $(window).width(), height: $(window).height()};\r\n}\r\n\r\n/*页面逻辑类*/\r\nclass Invitation{\r\n  constructor(elem){\r\n    this.envInit();\r\n    this.AC = new Anicanvas(elem, {...this.fullPageSize}); \r\n    this.pageInit();\r\n  }\r\n  envInit() {\r\n  \tthis.fullPageSize = getPageSize();\r\n  \tthis.rem = this.fullPageSize.width / 15;\r\n  }\r\n  resize(){\r\n  \tthis.envInit();\r\n  \tthis.AC.resize();\r\n  }\r\n  pageInit(){\r\n    /*\r\n    * 业务逻辑部分\r\n    */\r\n    //创建背景层\r\n    this.AC.createStage('background', {zIndex: 100});\r\n    this.AC.start();\r\n    //this.AC.$stage.pause();\r\n    //this.AC.$stages['background'].pause();\r\n    this.loadingMedia();\r\n  }\r\n  /*预加载资源*/\r\n  loadingMedia(){\r\n  \tlet preload_media = {\r\n      'images': {'bg1':'./img/bg.jpg','music':'./img/music.png','p1_01':'./img/p1_01.png','p1_02_01':'./img/p1_02_01.png','p1_02_02':'./img/p1_02_02.png','arrow':'./img/arrow.png','p1_03_01':'./img/p1_03_01.png','p1_03_02':'./img/p1_03_02.png','p1_03_03':'./img/p1_03_03.png'},\r\n      'audios':{'m1':'./media/bgm.mp3'}\r\n    };\r\n  \tthis.AC.loadingMedia(preload_media, this.drawPage);\r\n    this.drawLoadinProgress();\r\n  }\r\n  /*绘制进度条*/\r\n  drawLoadinProgress(){\r\n  \tlet rem = this.rem;\r\n  \tlet {height} = this.fullPageSize;\r\n  \tlet bgPainter = new Anicanvas.Painter( function(sprite, ctx, time, fdelta, data){\r\n  \t\tlet {left, top, width, height} = sprite;\r\n  \t\tctx.save();\r\n  \t\tctx.fillStyle = '#efefef';\r\n  \t\tctx.fillRect(left, top, width, height);\r\n  \t\tctx.restore();\r\n  \t});\r\n  \tlet layer = this.AC.createLayer('progLayer', 'fullpage', bgPainter);\r\n\r\n  \tlet progbarPaniter = new Anicanvas.Painter( (sprite, ctx, time, fdelta, data) => {\r\n  \t\tlet {left, top, width, height} = sprite;\r\n  \t\tlet mediaload = this.AC.$media.getImageProgress();\r\n  \t\tlet percent = mediaload[2];\r\n  \t\tctx.save();\r\n  \t\tctx.fillStyle = '#aeaeae';\r\n  \t\tctx.fillRect(left, top, width, height);\r\n  \t\tctx.fillStyle = '#999999';\r\n  \t\tctx.fillRect(left, top, width * percent / 100, height);\r\n  \t\tctx.restore();\r\n  \t\t(percent === 100) && (layer.destroy = true);\r\n  \t});\r\n  \tlet progressBar = new Anicanvas.Sprite('progbar', {left: 1*rem, top: height-40, width: 13*rem, height: 20}, progbarPaniter);\r\n  \tlayer.addSprite(progressBar);\r\n  \tthis.AC.$stages['background'].addLayer(layer);\r\n  }\r\n\r\n  drawPage = () => {\r\n    let rem = this.rem,\r\n    \t\tcanvasSize = this.fullPageSize,\r\n    \t\t{ $media: {images, audios}, createLayer, addLayer } = this.AC,\r\n    \t\tpageLayer = createLayer('page', 'fullpage', new Anicanvas.ImagePainter(images['bg1']));\r\n    \r\n    /*音乐播放按钮*/\r\n    let musicIcoPainter = new Anicanvas.ImagePainter(images['music']);\r\n    musicIcoPainter.addQueueFn('rotate');\r\n    let musicIco = new Anicanvas.Sprite('music', {\r\n\t    \ttop: 0.5 * rem, \r\n\t    \tleft: 0.865 * 15 * rem,\r\n\t    \twidth: 1.2 * rem,\r\n\t    \theight: 1.2 * rem,\r\n\t    \trotateVelocity: -45,\r\n\t    \tmedia: {\r\n\t    \t\t'music': audios['m1']\r\n\t    \t}\r\n\t    },\r\n    \tmusicIcoPainter, {\r\n      \t'rotate': {\r\n        \texecute : function(sprite, time, fdelta, data, context){\r\n          \tsprite.rotate = (sprite.rotate + fdelta/1000 * sprite.rotateVelocity ) % 360;\r\n        \t}\r\n      \t}\r\n    });\r\n    musicIco.setPath(function(context){\r\n      context.arc(this.left+this.width/2, this.top+this.height/2, 0, 2*Math.PI);\r\n    });\r\n    musicIco.media.play('music');\r\n    \r\n    \r\n      \r\n    /*对话框*/\r\n    let dailogPainter = new Anicanvas.Painter((sprite,context,time,fdelta,data) => {\r\n      if(sprite.data.photo){\r\n        dailogPainter.putPhoto(sprite, context);\r\n      }\r\n      else{\r\n        let dailog = images['p1_01'];\r\n        context.save();\r\n        if(sprite.opacity < 1){\r\n          context.globalAlpha = sprite.opacity > 0 ? sprite.opacity : 0;\r\n        }\r\n        context.drawImage(dailog, 0, 0, dailog.width, 398, sprite.left, sprite.top, sprite.width, sprite.height);\r\n        if(time > 2500){  \r\n        \tcontext.drawImage(dailog, 0, 400, dailog.width, 129, sprite.left, sprite.top+sprite.height*0.2513, sprite.width, sprite.height*0.3241);\r\n          //dailogPainter.getPhoto(sprite, context);\r\n        }\r\n        context.restore();\r\n      }\r\n    });\r\n    let dailog = new Anicanvas.Sprite('dailog', {\r\n    \t\ttop: -20, \r\n    \t\tleft: 2.64*rem, \r\n    \t\topacity: 0, \r\n    \t\twidth: 8.8*rem, \r\n    \t\theight: 6.76*rem\r\n    \t},\r\n    \tdailogPainter, {\r\n      \t'slideFadeDown' : new Anicanvas.Behavior({\r\n      \t\tname: 'slideFadeDown',\r\n      \t\ttiming: 'ease',\r\n      \t\tduration: 800,\r\n      \t\tdelay: 700, \r\n      \t\tfillMode: 'forward', \r\n      \t\tanimation:{ top:'+=20', opacity: 1}\r\n      \t})\r\n    \t}\r\n    );\r\n\r\n      \r\n    /*箭头动画*/\r\n    let arrowSlide = new Anicanvas.Behavior({\r\n    \tname: 'slideUpRepeat',\r\n    \tduration:2500,\r\n    \tdelay: 100,\r\n    \titeration: 'infinite',\r\n    \tanimation: {\r\n    \t\t0: {top: '+=8', opacity: 0},\r\n    \t\t30: {top: '-=3', opacity:1},\r\n    \t\t100: {top: '-=10', opacity:0}\r\n    \t}\r\n    });\r\n    let arrow = new Anicanvas.Sprite('arrow',{top:canvasSize.height-2*rem+8,left:6.92*rem,width:1.16*rem,opacity:0,height:1.16*rem},new Anicanvas.ImagePainter(images['arrow']),{'slideUpRepeat':arrowSlide})\r\n    \r\n\r\n      \r\n    /*背景*/\r\n    let midBgPanter = {\r\n      paint:(sprite,context,time,data)=>{\r\n        let midbg = sprite.data.img;\r\n        if(midbg) {\r\n        \tcontext.save();\r\n\t        if(sprite.opacity < 1){\r\n\t          context.globalAlpha = sprite.opacity > 0 ? sprite.opacity : 0;\r\n\t        }\r\n\t        sprite.top += sprite.velocityY * data;  \r\n\t        context.drawImage(midbg,0,0,midbg.width,midbg.height,sprite.left,sprite.top,sprite.width,sprite.height);\r\n\t        context.restore();\r\n        }\r\n      }\r\n    };\r\n    let midBgBehaviors = {\r\n      'slideUp':{\r\n      \tdistance: -20, duration:800, delay:2500,\r\n        execute : function(sprite, time){\r\n          sprite.img = images['p1_02_01'];\r\n          if(time>this.delay){\r\n            \r\n            let deltat = time-this.delay;\r\n            sprite.velocityY = this.distance/this.duration;\r\n            let opacity = deltat / this.duration;\r\n            if(deltat>=800){\r\n              sprite.velocityY = 0;\r\n              opacity = 1;\r\n              delete sprite.behaviors.slideUp;\r\n            }\r\n            sprite.opacity = opacity>1?1:opacity;\r\n          }\r\n        }\r\n      },\r\n      'bgswitch':{\r\n      \tdelay:3500,\r\n        execute : function(sprite, time){\r\n          if(time>this.delay){\r\n            let deltat = time - this.delay,\r\n                skipt = deltat % 1000;\r\n            if(skipt<500){\r\n              sprite.data.img = images['p1_02_01'];\r\n            }\r\n            else{\r\n              sprite.data.img = images['p1_02_02'];\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    let midBgLayer = new Anicanvas.Layer('midbg', {top:6.96*rem+20, left:0.52*rem, width:13.52*rem, opacity:0, height:12.7*rem, data: {img:null}}, midBgPanter, midBgBehaviors);\r\n    /*人物*/\r\n    let peopleCell = [{x:0,y:0,w:268,h:384},{x:270,y:0,w:268,h:384},{x:540,y:0,w:268,h:384},{x:810,y:0,w:268,h:384}],\r\n        peoplePainter = new Anicanvas.SheetPainter(images['p1_03_01'], peopleCell, {interval:500, autoruning:true, iteration:'infinite'})\r\n    let people = new Anicanvas.Sprite('people', {top:6.27*rem,left:2.2*rem,width:10.72*rem,opacity:0,height:15.36*rem}, peoplePainter);\r\n\r\n    /*固定图片*/\r\n    let customPainter = {\r\n      paint:function(sprite,context,time,data){\r\n        let img = sprite.data.img;\r\n        img && context.drawImage(img, 0, 0, img.width, img.height, sprite.left, sprite.top, sprite.width, sprite.height);\r\n      }\r\n    };\r\n    let floor = new Anicanvas.Sprite('floor', {top:19.31*rem, left:2.745*rem, width:10.56*rem, height:2.88*rem, data:{ img: images['p1_03_03']}}, customPainter);\r\n    let desc = new Anicanvas.Sprite('desc', {top:14.275*rem, left:3.84*rem, width:7.02*rem, height:5.12*rem, data:{img: images['p1_03_02']}}, customPainter);\r\n\r\n\r\n    midBgLayer.addSprite(people);\r\n    midBgLayer.addSprite(desc);\r\n    this.AC.addSprite(musicIco, arrow);\r\n    addLayer(midBgLayer);\r\n\r\n    pageLayer.addSprite(dailog);\r\n    pageLayer.addSprite(floor);\r\n    this.AC.$stages['background'].addLayer(pageLayer);\r\n      \r\n  }\r\n    \r\n  \r\n}\r\n\r\n\r\n\r\n"],"names":["$","app","Invitation","window","resize","clearTimeout","t","setTimeout","getPageSize","width","height","elem","drawPage","rem","canvasSize","fullPageSize","AC","$media","images","audios","createLayer","addLayer","pageLayer","Anicanvas","ImagePainter","musicIcoPainter","addQueueFn","musicIco","Sprite","top","left","rotateVelocity","media","execute","sprite","time","fdelta","data","context","rotate","setPath","arc","Math","PI","play","dailogPainter","Painter","photo","putPhoto","dailog","save","opacity","globalAlpha","drawImage","restore","Behavior","name","timing","duration","delay","fillMode","animation","arrowSlide","iteration","arrow","midBgPanter","paint","midbg","img","velocityY","midBgBehaviors","distance","deltat","behaviors","slideUp","skipt","midBgLayer","Layer","peopleCell","x","y","w","h","peoplePainter","SheetPainter","interval","autoruning","people","customPainter","floor","desc","addSprite","$stages","envInit","pageInit","createStage","zIndex","start","loadingMedia","preload_media","drawLoadinProgress","bgPainter","ctx","fillStyle","fillRect","layer","progbarPaniter","mediaload","getImageProgress","percent","destroy","progressBar"],"mappings":"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"}